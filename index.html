<html>
<head>
	<meta charset="utf-8" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.js"></script>
	<script src="https://cdn.steemjs.com/lib/latest/steem.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.css"/>
</head>

<body>
	<span data-toggle="modal"></span>
	
	<div class="ui modal" id="modaldiv">
		<i class="close icon"></i>
		<div class="header">
    	<span class="modal-title"><span>
  		</div>
     	<div class="content">
       		<p class="modal-details"></p>
  		</div>
	</div>
	
	
	<div class="ui two column  centered grid">
		<div class="column">
			<p>
			<h3 class="ui header">Type your reward in Steem Dollar (as displayed on Steemit and Busy)</h3>
			<div class="ui input" >
				<input placeholder="Type your reward..." type="text" id="reward" value=0>
			</div>
			
			</p>
			<div class="ui divider"></div>
			<table class="ui celled definition table">

			<thead>
				<tr>
					<th></th>
					<th colspan="3" style="text-align: center">50/50</th>
					<th style="text-align: center">100% STEEM POWER</th>
				</tr>
				<tr>
					<th></th>
					<th style="text-align: center" >50% SBD </th>
					<th style="text-align: center">50% STEEM POWER</th>
					<th style="text-align: center">Total</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr>
				<td>USD Value</td>
				<td style="text-align: center"><span class="sbd_part">0</span><i class="help circle icon sbd_part_info"></i></td>
				<td style="text-align: center"><span class="dollar_part">0</span><i class="help circle icon dollar_part_info"></i></td>
				<td style="text-align: center"><span class="total-50-50">0</span><i class="help circle icon total-50-50_info"></i></td>
				
				<td style="text-align:center"><span class="total-100">0</span><i class="help circle icon total-100_info"></i></td>
				</tr>

				<tr>
				<td>STEEM Value</td>
				<td style="text-align: center"><span class="sbd_reinvested">0</span><i class="help circle icon sbd_reinvested_info"></i></td>
				<td style="text-align: center"><span class="steem">0</span><i class="help circle icon steem_info"></i></td>
				<td style="text-align:center"><span class="total-50-50-insteem">0</span><i class="help circle icon total-50-50-insteem_info"></i></td>
				<td style="text-align:center"><span class="total-100-insteem">0</span><i class="help circle icon total-100-insteem_info"></i></td>
				</tr>

			</tbody>
			</table>
			
			
			
			
			
			<div class="ui divider"></div>


			<div class="ui floating message">
				<p>If you appreciate my work as a Steem witness, you can support me by voting for me (<a href="https://v2.steemconnect.com/sign/account-witness-vote?witness=evildido&approve=1">approve me</a>).
				</p>
			</div>
		</div>

	</div>


	</div>







<script>
$(document).ready(function() {
	steem.api.setOptions({ url: 'https://api.steemit.com' });
	$.get('https://api.coinmarketcap.com/v1/ticker/steem-dollars/', function(data) {
		sessionStorage.setItem("sbd_price",data[0].price_usd);
		sbd_price = Number(sessionStorage.getItem("sbd_price")).toFixed(2);
		$(".sbd_price").html(Number(sessionStorage.getItem("sbd_price")).toFixed(2)); 
	});
	steem.api.getOrderBook(1, function(err, result) {
		sessionStorage.setItem("sbdsteem_market_price",Number(result.asks[0].real_price).toFixed(2));
		$(".sbdsteem_market_price").html(Number(sessionStorage.getItem("sbdsteem_market_price")).toFixed(2));
	});	
	steem.api.getCurrentMedianHistoryPrice(function(err, result) {
		regex = /([0-9].*\.[0-9]{3})/g;
		sessionStorage.setItem("quote", regex.exec(result.quote)[0]);
		regex = /([0-9].*\.[0-9]{3})/g;	
  		sessionStorage.setItem("base", regex.exec(result.base)[0]);	
  		steem_price = sessionStorage.getItem("base") / sessionStorage.getItem("quote");
  		sessionStorage.setItem("steem_price",steem_price);
  		$(".steem_price").html(Number(sessionStorage.getItem("steem_price")).toFixed(2));
	});
});
	$("#reward").on("keyup", function() {
		sbd_part = (Number.parseFloat(this.value)/2) * sessionStorage.getItem("sbd_price");
		dollar_part = (Number.parseFloat(this.value)/2);
		total_50_50 = dollar_part + sbd_part;
		
		$(".sbd_part").html(Number(sbd_part).toFixed(2));
		$(".dollar_part").html(Number(dollar_part).toFixed(2));
		$(".total-50-50").html(Number(total_50_50).toFixed(2));
		$(".total-100").html(Number(this.value).toFixed(2));
		
				
		
		reward_5050_insteem = ((Number.parseFloat(this.value)/2)/sessionStorage.getItem("sbdsteem_market_price")) + ((Number.parseFloat(this.value)/2)/sessionStorage.getItem("steem_price"));
		reward_100_insteem = Number.parseFloat(this.value)/sessionStorage.getItem("steem_price");
		sbd_reinvested = (Number.parseFloat(this.value)/2)/sessionStorage.getItem("sbdsteem_market_price");
		steem = (Number.parseFloat(this.value)/2)/sessionStorage.getItem("steem_price");
		
		
		$(".sbd_reinvested").html(Number(sbd_reinvested).toFixed(2));
		$(".steem").html(Number(steem).toFixed(2));
		$(".total-50-50-insteem").html(Number(reward_5050_insteem).toFixed(2));
		$(".total-100-insteem").html(Number(reward_100_insteem).toFixed(2));
		
		
	});
	
	$('.sbd_part_info').click(function(){
		$('.modal-title').html("50% Steem Dollar real Value");
		details = "<b>(Reward In Steem Dollar / 2) x Steem Dollar Price : </b> (" + $('#reward').val() + "/ 2) x " + Number(sessionStorage.getItem("sbd_price")).toFixed(2) + " = " + Number(sbd_part).toFixed(2);
		$('.modal-details').html(details);
		$('#modaldiv').modal('show');
	});
	$('.dollar_part_info').click(function(){
		$('.modal-title').html("50% Steem Power real Value");
		details = "<b>(Reward In Steem Dollar / 2) : </b> (" + $('#reward').val() + "/ 2) " + " = " + $('#reward').val()/2;
		$('.modal-details').html(details);
		$('#modaldiv').modal('show');
	});
	$('.total-50-50_info').click(function(){
		$('.modal-title').html("Total");
		total = Number.parseFloat(Number(sessionStorage.getItem("sbd_part")).toFixed(2)) + $('#reward').val()/2;
		details = "<b>Steem Dollar Real Value + Steem Power Real Value : </b> " + Number(sbd_part).toFixed(2) + " + " + $('#reward').val()/2 + " = " + total;
		$('.modal-details').html(details);
		$('#modaldiv').modal('show');
	});
	$('.total-100_info').click(function(){
		$('.modal-title').html("Total");
		details = "<b>Total : </b> " + Number($('#reward').val()).toFixed(2);
		$('.modal-details').html(details);
		$('#modaldiv').modal('show');
	});
	$('.sbd_reinvested_info').click(function(){
		$('.modal-title').html("50% Steem dollars in STEEM (via internal market)");
		details = "<b>(Reward In Steem Dollar / 2) /  (SBD/STEEM price (market)) : </b> (" + $('#reward').val() + "/ 2) / " +  Number(sessionStorage.getItem("sbdsteem_market_price")).toFixed(2) + " = " + Number(sessionStorage.getItem("sbd_reinvested")).toFixed(2);
		$('.modal-details').html(details);
		$('#modaldiv').modal('show');
	});
	$('.steem_info').click(function(){
		$('.modal-title').html("50% Steem dollars in STEEM (via median price)");
		details = "<b>(Reward In Steem Dollar / 2) /  (SBD/STEEM median price) : </b> (" + $('#reward').val() + "/ 2) / " +  Number(sessionStorage.getItem("steem_price")).toFixed(2) + " = " + Number(steem).toFixed(2);
		$('.modal-details').html(details);
		$('#modaldiv').modal('show');
	});
	$('.total-50-50-insteem_info').click(function(){
	
		$('.modal-title').html("Total");
		details = "<b>50% Steem Dollar (internal market) + 50% Steem Dollar (median price) : </b> " + Number(sbd_reinvested).toFixed(2) + " + " + Number(steem).toFixed(2) + " = " + Number(reward_5050_insteem).toFixed(2);
		$('.modal-details').html(details);
		$('#modaldiv').modal('show');
	});
	$('.total-100-insteem_info').click(function(){
		$('.modal-title').html("Total");
		details = "<b>Reward /  (SBD/STEEM median price)  : </b> " + $('#reward').val() + " / " + Number(steem_price).toFixed(2) + " = " + Number(reward_100_insteem).toFixed(2);
		$('.modal-details').html(details);
		$('#modaldiv').modal('show');
	});
    </script>
</body>




</html> 
